!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}((function(e){e.extend(!0,e.summernote.lang,{"en-US":{elementPath:{tooltip:"Element Path"}}}),e.extend(e.summernote.plugins,{elementpath:function(t){var n=this,o=(e.summernote.ui,t.layoutInfo.editor),a=t.layoutInfo.editable,l=t.layoutInfo.statusbar,s=t.options,i=(s.langInfo,{enabled:!0,separator:"  ",clickToSelect:!0,showTags:["P","H1","H2","H3","H4","H5","H6","BLOCKQUOTE","PRE","LI","OL","UL","TD","TH","TR","TABLE","DIV","STRONG","B","EM","I","U","S","STRIKE","SUP","SUB","A","CODE","SPAN"]}),r=e.extend({},i,s.elementPath||{}),g=null;this.initialize=function(){if(console.log("[ElementPath] Initializing plugin, enabled:",r.enabled),console.log("[ElementPath] $statusbar:",l,"length:",l.length),console.log("[ElementPath] $editable:",a[0]),r.enabled&&l.length>0){if(l.find(".note-element-path").length>0)return void console.log("[ElementPath] Element path already exists for this editor, skipping...");var t=l.find(".note-status-output");0===t.length&&(t=e('<div class="note-status-output"></div>'),l.prepend(t));var n=a.attr("id")||Math.random().toString(36).substr(2,9);(g=e('<div class="note-element-path" data-editor-id="'+n+'"></div>')).css({display:"inline-block","margin-right":"10px","padding-left":"8px","padding-top":"5px",color:"#666","font-size":"12px"}),t.append(g),console.log("[ElementPath] Created element path for editor:",n),this.bindEvents()}},this.getElementPath=function(){var n=[],o=window.getSelection();if(console.log("[ElementPath] Getting element path..."),console.log("[ElementPath] Selection rangeCount:",o.rangeCount),o.rangeCount>0){var l=o.getRangeAt(0),s=l.startContainer;if(console.log("[ElementPath] Initial node:",s),console.log("[ElementPath] Node is inside editable?",a[0].contains(s)),!a[0].contains(s)){console.log("[ElementPath] Selection is outside editor, checking if editor has focus...");var i=t.invoke("editor.getLastRange");if(console.log("[ElementPath] Saved range:",i),!i||!i.sc)return n;s=i.sc}for(3===s.nodeType&&(s=s.parentElement),console.log("[ElementPath] After text node check:",s),console.log("[ElementPath] $editable[0]:",a[0]);s&&s!==a[0]&&!e(s).hasClass("note-editable");){var g=s.nodeName.toUpperCase();if(console.log("[ElementPath] Checking node:",g,"in showTags:",r.showTags),-1!==r.showTags.indexOf(g)){var c={node:s,name:g.toLowerCase(),displayName:g.toLowerCase()};if(s.id)c.displayName+="#"+s.id;else if(s.className&&"string"==typeof s.className){var p=s.className.split(" ").filter((function(e){return e&&!e.startsWith("note-")}));p.length>0&&(c.displayName+="."+p[0])}n.unshift(c)}s=s.parentElement}}return n},this.updateDisplay=function(){if(console.log("[ElementPath] updateDisplay called, $elementPath:",g),g){var pathArray=this.getElementPath();console.log("[ElementPath] Path found:",pathArray);var t=['<span style="color: #999;">body</span>'];pathArray.length>0&&pathArray.forEach((function(pathItem,idx){r.clickToSelect?t.push('<a href="#" class="note-element-path-item" data-element-index="'+idx+'" style="color: #337ab7; text-decoration: none; padding: 2px 4px; border-radius: 2px;" onmouseover="this.style.backgroundColor=\'#f0f0f0\'" onmouseout="this.style.backgroundColor=\'transparent\'">'+pathItem.displayName+"</a>"):t.push("<span>"+pathItem.displayName+"</span>")})),g.html(t.join('<span style="color: #999;">'+r.separator+"</span>")),r.clickToSelect&&g.find(".note-element-path-item").on("click",(function(clickEvent){clickEvent.preventDefault(),console.log("[ElementPath] Element path item clicked");var clickedIndex=parseInt(e(this).data("element-index"));console.log("[ElementPath] Clicked index:",clickedIndex,"Path length:",pathArray.length),clickedIndex>=0&&clickedIndex<pathArray.length?(console.log("[ElementPath] Selecting element:",pathArray[clickedIndex]),n.selectElement(pathArray[clickedIndex].node)):console.error("[ElementPath] Invalid index:",clickedIndex)}))}},this.selectElement=function(element){console.log("[ElementPath] selectElement called with:",element);if(!element){console.log("[ElementPath] No element provided to selectElement");return}try{var range=document.createRange();range.selectNodeContents(element),console.log("[ElementPath] Created range:",range);var selection=window.getSelection();selection.removeAllRanges(),selection.addRange(range),console.log("[ElementPath] Applied selection, rangeCount:",selection.rangeCount),a.focus(),console.log("[ElementPath] Focused editor"),this.updateDisplay()}catch(error){console.error("[ElementPath] Error in selectElement:",error)}},this.bindEvents=function(){["keyup","mouseup","focus","blur"].forEach((function(eventName){a.on(eventName,(function(evt){console.log("[ElementPath] Event triggered:",eventName,"for editor:",a[0]),n.updateDisplay()}))})),["summernote.keyup","summernote.mouseup","summernote.change"].forEach((function(eventName){o.on(eventName,(function(){console.log("[ElementPath] Summernote event triggered:",eventName),n.updateDisplay()}))})),o.on("click",".note-toolbar .note-btn",(function(toolbarEvent){console.log("[ElementPath] Toolbar button clicked:",e(this)),setTimeout((function(){n.updateDisplay()}),50)})),o.on("click",".dropdown-style .dropdown-item",(function(dropdownEvent){console.log("[ElementPath] Style dropdown item clicked:",e(this),"data-value:",e(this).data("value")),setTimeout((function(){n.updateDisplay()}),100)})),["summernote.paste","summernote.enter"].forEach((function(eventName){o.on(eventName,(function(){console.log("[ElementPath] Format event triggered:",eventName),setTimeout((function(){n.updateDisplay()}),100)}))})),setTimeout((function(){console.log("[ElementPath] Initial update for editor:",a[0]),n.updateDisplay()}),100)},this.destroy=function(){g&&(g.remove(),g=null)}}})}));