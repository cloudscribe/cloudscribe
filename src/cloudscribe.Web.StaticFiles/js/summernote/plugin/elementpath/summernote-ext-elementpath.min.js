!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}((function(e){e.extend(!0,e.summernote.lang,{"en-US":{elementPath:{tooltip:"Element Path"}}}),e.extend(e.summernote.plugins,{elementpath:function(t){var n=this,o=(e.summernote.ui,t.layoutInfo.editor),a=t.layoutInfo.editable,l=t.layoutInfo.statusbar,s=t.options,i=(s.langInfo,{enabled:!0,separator:"  ",clickToSelect:!0,showTags:["P","H1","H2","H3","H4","H5","H6","BLOCKQUOTE","PRE","LI","OL","UL","TD","TH","TR","TABLE","DIV","STRONG","B","EM","U","S","STRIKE","SUP","SUB","A","CODE","SPAN"]}),r=e.extend({},i,s.elementPath||{}),g=null;this.initialize=function(){if(console.log("[ElementPath] Initializing plugin, enabled:",r.enabled),console.log("[ElementPath] $statusbar:",l,"length:",l.length),console.log("[ElementPath] $editable:",a[0]),r.enabled&&l.length>0){if(l.find(".note-element-path").length>0)return void console.log("[ElementPath] Element path already exists for this editor, skipping...");var t=l.find(".note-status-output");0===t.length&&(t=e('<div class="note-status-output"></div>'),l.prepend(t));var n=a.attr("id")||Math.random().toString(36).substr(2,9);(g=e('<div class="note-element-path" data-editor-id="'+n+'"></div>')).css({display:"inline-block","margin-right":"10px","padding-left":"8px","padding-top":"5px",color:"#666","font-size":"12px"}),t.append(g),console.log("[ElementPath] Created element path for editor:",n),this.bindEvents()}},this.getElementPath=function(){var n=[],o=window.getSelection();if(console.log("[ElementPath] Getting element path..."),console.log("[ElementPath] Selection rangeCount:",o.rangeCount),o.rangeCount>0){var l=o.getRangeAt(0),s=l.startContainer;if(console.log("[ElementPath] Initial node:",s),console.log("[ElementPath] Node is inside editable?",a[0].contains(s)),!a[0].contains(s)){console.log("[ElementPath] Selection is outside editor, checking if editor has focus...");var i=t.invoke("editor.getLastRange");if(console.log("[ElementPath] Saved range:",i),!i||!i.sc)return n;s=i.sc}for(3===s.nodeType&&(s=s.parentElement),console.log("[ElementPath] After text node check:",s),console.log("[ElementPath] $editable[0]:",a[0]);s&&s!==a[0]&&!e(s).hasClass("note-editable");){var g=s.nodeName.toUpperCase();if(console.log("[ElementPath] Checking node:",g,"in showTags:",r.showTags),-1!==r.showTags.indexOf(g)){var c={node:s,name:g.toLowerCase(),displayName:g.toLowerCase()};if(s.id)c.displayName+="#"+s.id;else if(s.className&&"string"==typeof s.className){var p=s.className.split(" ").filter((function(e){return e&&!e.startsWith("note-")}));p.length>0&&(c.displayName+="."+p[0])}n.unshift(c)}s=s.parentElement}}return n},this.updateDisplay=function(){if(console.log("[ElementPath] updateDisplay called, $elementPath:",g),g){var e=this.getElementPath();console.log("[ElementPath] Path found:",e);var t=['<span style="color: #999;">body</span>'];e.length>0&&e.forEach((function(e,n){r.clickToSelect?t.push('<a href="#" class="note-element-path-item" data-element-index="'+n+'" style="color: #337ab7; text-decoration: none; padding: 2px 4px; border-radius: 2px;" onmouseover="this.style.backgroundColor=\'#f0f0f0\'" onmouseout="this.style.backgroundColor=\'transparent\'">'+e.displayName+"</a>"):t.push("<span>"+e.displayName+"</span>")})),g.html(t.join('<span style="color: #999;">'+r.separator+"</span>")),r.clickToSelect&&g.find(".note-element-path-item").on("click",(function(t){t.preventDefault();var o=parseInt(e(this).data("element-index"));n.selectElement(e[o].node)}))}},this.selectElement=function(e){if(e){var t=document.createRange();t.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(t),a.focus(),this.updateDisplay()}},this.bindEvents=function(){["keyup","mouseup","focus","blur"].forEach((function(e){a.on(e,(function(t){console.log("[ElementPath] Event triggered:",e,"for editor:",a[0]),n.updateDisplay()}))})),["summernote.keyup","summernote.mouseup","summernote.change"].forEach((function(e){o.on(e,(function(){console.log("[ElementPath] Summernote event triggered:",e),n.updateDisplay()}))})),setTimeout((function(){console.log("[ElementPath] Initial update for editor:",a[0]),n.updateDisplay()}),100)},this.destroy=function(){g&&(g.remove(),g=null)}}})}));