!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}((function(e){e.extend(!0,e.summernote.lang,{"en-US":{elementPath:{tooltip:"Element Path"}}}),e.extend(e.summernote.plugins,{elementpath:function(t){var n=this,o=(e.summernote.ui,t.layoutInfo.editor),a=t.layoutInfo.editable,l=t.layoutInfo.statusbar,s=t.options,i=(s.langInfo,{enabled:!0,separator:"  ",clickToSelect:!0,showTags:["P","H1","H2","H3","H4","H5","H6","BLOCKQUOTE","PRE","LI","OL","UL","TD","TH","TR","TABLE","DIV","STRONG","B","EM","I","U","S","STRIKE","SUP","SUB","A","CODE","SPAN","IMG","SMALL","CITE","CAPTION","THEAD","TBODY","TFOOT","ARTICLE","DL","DT","DD","HEADER","FOOTER","MAIN","SECTION","ASIDE","NAV","FIGURE","FIGCAPTION","MARK","HR","FIELDSET","LEGEND","LABEL","ADDRESS","INPUT","DETAILS","SUMMARY","IFRAME","AUDIO","VIDEO","SOURCE","DIALOG","PROGRESS","METER","OUTPUT","CANVAS","SVG"]}),r=e.extend({},i,s.elementPath||{}),g=null;this.initialize=function(){if(console.log("[ElementPath] Initializing plugin, enabled:",r.enabled),r.enabled&&l.length>0){if(l.find(".note-element-path").length>0)return;var t=l.find(".note-status-output");0===t.length&&(t=e('<div class="note-status-output"></div>'),l.prepend(t));var n=a.attr("id")||Math.random().toString(36).substr(2,9);(g=e('<div class="note-element-path" data-editor-id="'+n+'"></div>')).css({display:"inline-block","margin-right":"10px","padding-left":"8px","padding-top":"5px",color:"#666","font-size":"12px"}),t.append(g),this.bindEvents()}},this.getElementPath=function(){var n=[],o=window.getSelection();if(o.rangeCount>0){var l=o.getRangeAt(0),s=l.startContainer;if(!a[0].contains(s)){var i=t.invoke("editor.getLastRange");if(!i||!i.sc)return n;s=i.sc}for(3===s.nodeType&&(s=s.parentElement);s&&s!==a[0]&&!e(s).hasClass("note-editable");){var g=s.nodeName.toUpperCase();if(-1!==r.showTags.indexOf(g)){var c={node:s,name:g.toLowerCase(),displayName:g.toLowerCase()};if(s.id)c.displayName+="#"+s.id;else if(s.className&&"string"==typeof s.className){var p=s.className.split(" ").filter((function(e){return e&&!e.startsWith("note-")}));p.length>0&&(c.displayName+="."+p[0])}n.unshift(c)}s=s.parentElement}}return n},this.updateDisplay=function(){if(g){if(o.hasClass("codeview"))return void g.css("visibility","hidden");g.css("visibility","visible");var pathArray=this.getElementPath(),t=['<span style="color: #999; padding-right: 4px;">body</span>'];pathArray.length>0&&pathArray.forEach((function(pathItem,idx){r.clickToSelect?t.push('<a href="#" class="note-element-path-item" data-element-index="'+idx+'" style="color: #303030; font-weight: 600; text-decoration: none; padding: 2px 4px; border-radius: 2px;" onmouseover="this.style.backgroundColor=\'#e0e8f0\'" onmouseout="this.style.backgroundColor=\'transparent\'">'+pathItem.displayName+"</a>"):t.push('<span style="color: #303030; font-weight: 600;">'+pathItem.displayName+"</span>")})),g.html(t.join('<span style="color: #999;">'+r.separator+"</span>")),r.clickToSelect&&g.find(".note-element-path-item").on("click",(function(clickEvent){clickEvent.preventDefault();var clickedIndex=parseInt(e(this).data("element-index"));clickedIndex>=0&&clickedIndex<pathArray.length?n.selectElement(pathArray[clickedIndex].node):void 0}))}},this.selectElement=function(element){if(element)try{a.focus();var range=document.createRange();range.selectNodeContents(element);var selection=window.getSelection();selection.removeAllRanges(),selection.addRange(range),t.invoke("editor.saveRange")}catch(error){}},this.bindEvents=function(){["keyup","mouseup","focus","blur"].forEach((function(eventName){a.on(eventName,(function(evt){"mouseup"===eventName?setTimeout((function(){n.updateDisplay()}),10):n.updateDisplay()}))})),a.on("click",(function(clickEvt){setTimeout((function(){n.updateDisplay()}),20)})),["summernote.keyup","summernote.mouseup","summernote.change"].forEach((function(eventName){o.on(eventName,(function(){n.updateDisplay()}))})),o.on("click",".note-toolbar .note-btn",(function(toolbarEvent){setTimeout((function(){n.updateDisplay()}),50)})),o.on("click",".dropdown-style .dropdown-item",(function(dropdownEvent){setTimeout((function(){n.updateDisplay()}),100)})),["summernote.paste","summernote.enter"].forEach((function(eventName){o.on(eventName,(function(){setTimeout((function(){n.updateDisplay()}),100)}))})),setTimeout((function(){n.updateDisplay()}),100)},this.destroy=function(){g&&(g.remove(),g=null)}}})}));