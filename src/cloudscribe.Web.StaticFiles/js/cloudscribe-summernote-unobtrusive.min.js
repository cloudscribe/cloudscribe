$((async function () { let e, t, n, a = $("textarea[data-summernote-unobtrusive]").toArray(), o = 0; if (a) { for (elem of a) { let d = $(elem).data("summernote-unobtrusive"), g = $(elem).data("summernote-config-url"), f = $(elem).data("summernote-toolbar-config-url"), p = $(elem).data("summernote-config-language"); if (e = $(elem).data("summernote-config-dropfileuploadurl"), n = $('[name="__RequestVerificationToken"]:first').val(), d = d ? 'textarea[data-summernote-unobtrusive="' + d + '"]' : 'textarea[data-summernote-unobtrusive=""]', g) { let h, v; async function r(e) { await fetch(e).then((e => e.json())).then((e => { v = e })) } async function i(e) { await fetch(e).then((e => e.json())).then((e => { h = e, h.lang = p || "en-US" })) } function s() { $(d).each((function (e) { $(d).eq(e).summernote({ callbacks: { onImageUpload: function (n) { o = e, t = d, m(n) } }, toolbar: v, ...h }), $(d).on("summernote.codeview.change", (function (e, t, n) { var a = $(this).nextAll(".note-editor.note-frame.card.codeview"), o = a.find(".note-editable.card-block"), r = a.prev(d); o.html(t), r.val(t) })) })) } await i(g), await r(f), await s() } } function m(e) { if (content = e, e && e.length > 0) for (var t = 0; t < e.length; t++) { var n = e[t].name, a = n.substring(0, n.lastIndexOf(".")) || n, o = n.substring(n.lastIndexOf(".") + 1).toLowerCase(), r = a + "_" + (new Date).toISOString().replace(/:|\./g, "-").substring(0, 21) + "." + o; u(l(e[t], r)) } } function l(e, t) { return new File([e], t, { type: e.type, lastModified: e.lastModified }) } function u(t) { switch (t.type) { case "image/jpeg": case "image/jpg": case "image/gif": case "image/png": case "image/svg+xml": var a = new FormData; a.append("__RequestVerificationToken", n), a.append(t.name, t), $.ajax({ type: "POST", processData: !1, contentType: !1, dataType: "json", url: e, data: a, success: c }) } } function c(e, n, a) { e[0].errorMessage ? alert(e[0].errorMessage) : e[0].resizedUrl ? t ? $(t).eq(o).summernote("insertImage", e[0].resizedUrl, e[0].name) : $(summernoteInstance).eq(o).summernote("insertImage", e[0].resizedUrl, e[0].name) : t ? $(t).eq(o).summernote("insertImage", e[0].originalUrl, e[0].name) : $(summernoteInstance).eq(o).summernote("insertImage", e[0].originalUrl, e[0].name) } } })), window.handleMessageFromChild = function (e) { var t = document.querySelectorAll(".note-modal"); $("#" + e.instance).summernote("insertImage", e.url, e.filename), t && ($(t).modal("hide"), $(document.body).removeAttr("style"), $(document.body).removeAttr("padding-right"), $(".modal-backdrop").toggle()) };